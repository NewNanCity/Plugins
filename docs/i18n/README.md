# I18n æ¨¡å—ç”¨æˆ·æ•™ç¨‹

æ¬¢è¿ä½¿ç”¨ç°ä»£åŒ–çš„å›½é™…åŒ–æ¡†æ¶ï¼æœ¬æ•™ç¨‹å°†å¸¦æ‚¨ä»é›¶å¼€å§‹å­¦ä¹ å¦‚ä½•ä½¿ç”¨ I18n æ¨¡å—æ„å»ºå¤šè¯­è¨€æ”¯æŒç³»ç»Ÿã€‚

## âš ï¸ å…³é”®æ¦‚å¿µ - åŠ¨æ€å­—æ®µè¯´æ˜

**é‡è¦**ï¼šI18n æ¨¡å—é»˜è®¤**ä¸åŒ…å«**ä»»ä½•å†…ç½®çš„åŠ¨æ€å­—æ®µã€‚æ–‡æ¡£ä¸­çœ‹åˆ°çš„æ‰€æœ‰å˜é‡ï¼ˆå¦‚ `{0}`ã€`{1}` ç­‰ä½ç½®å‚æ•°ï¼‰éœ€è¦åœ¨ä½¿ç”¨æ—¶ä¼ é€’å…·ä½“å€¼ã€‚

- âœ… **å†…ç½®åŠŸèƒ½**ï¼šåŸºç¡€æ–‡æœ¬æ›¿æ¢ã€å¤šè¯­è¨€å›é€€ã€ç¼“å­˜æœºåˆ¶
- âŒ **éå†…ç½®åŠŸèƒ½**ï¼šä»»ä½•åŠ¨æ€å­—æ®µï¼ˆéœ€è¦ä¼ å‚æ”¯æŒï¼‰
- ğŸ”§ **ä½¿ç”¨æ–¹å¼**ï¼šé€šè¿‡ä½ç½®å‚æ•° `{0}`, `{1}` ä¼ é€’åŠ¨æ€å€¼

## ğŸ“š æ–‡æ¡£ç›®å½•

### åŸºç¡€æ•™ç¨‹
- [ğŸ“– ä»‹ç»](intro.md) - 5åˆ†é’Ÿå¿«é€Ÿäº†è§£I18næ¨¡å—
- [ğŸš€ å¿«é€Ÿå¼€å§‹](quick-start.md) - ç¬¬ä¸€ä¸ªå¤šè¯­è¨€é…ç½®
- [ğŸ¯ åŸºç¡€æ¦‚å¿µ](concepts.md) - æ ¸å¿ƒæ¦‚å¿µè¯¦è§£

### åŠŸèƒ½æŒ‡å—
- [ğŸŒ å¤šè¯­è¨€æ”¯æŒ](languages.md) - è¯­è¨€æ³¨å†Œå’Œç®¡ç†
- [ğŸ“ æ¨¡æ¿ç³»ç»Ÿ](templates.md) - {0},{1}æ ¼å¼çš„ä½ç½®å‚æ•°
- [ğŸ”„ å›é€€æœºåˆ¶](fallback.md) - ä¸‰çº§å›é€€ç­–ç•¥
- [ğŸ”¥ åŠ¨æ€é‡è½½](hot-reload.md) - è¿è¡Œæ—¶é‡æ–°åŠ è½½è¯­è¨€æ–‡ä»¶
- [ğŸ’¾ ç¼“å­˜ä¼˜åŒ–](caching.md) - é«˜æ€§èƒ½ç¼“å­˜æœºåˆ¶
- [ğŸ“„ å¤šæ ¼å¼æ”¯æŒ](formats.md) - ç»§æ‰¿Configæ¨¡å—çš„æ ¼å¼æ”¯æŒ

### è§„èŒƒå’Œæ¨¡æ¿
- [ğŸ“‹ i18n Keyå‘½åè§„èŒƒ](naming-conventions.md) - ç»Ÿä¸€çš„é”®åè§„èŒƒå’Œæœ€ä½³å®è·µ
- [ğŸ“„ é€šç”¨æ¨¡æ¿æ–‡ä»¶](template.yml) - ä¸­æ–‡æ¨¡æ¿æ–‡ä»¶
- [ğŸ“„ è‹±æ–‡æ¨¡æ¿æ–‡ä»¶](template_en.yml) - è‹±æ–‡æ¨¡æ¿æ–‡ä»¶

### é«˜çº§ä¸»é¢˜
- [ğŸ‘¤ ç”¨æˆ·è¯­è¨€](user-language.md) - æ¯ä¸ªç©å®¶çš„è¯­è¨€è®¾ç½®
- [ğŸ”„ åŠ¨æ€åˆ‡æ¢](language-switching.md) - è¿è¡Œæ—¶è¯­è¨€åˆ‡æ¢
- [ğŸŒ ç¿»è¯‘API](translation-api.md) - åœ¨çº¿ç¿»è¯‘æœåŠ¡é›†æˆ
- [ğŸ“Š ä½¿ç”¨ç»Ÿè®¡](statistics.md) - è¯­è¨€ä½¿ç”¨ç»Ÿè®¡åˆ†æ

### å‚è€ƒèµ„æ–™
- [ğŸ“‹ APIå‚è€ƒ](api-reference.md) - å®Œæ•´APIæ–‡æ¡£
- [ğŸ’¡ æœ€ä½³å®è·µ](best-practices.md) - å¼€å‘å»ºè®®å’Œæ¨¡å¼
- [ğŸ”§ æ•…éšœæ’é™¤](troubleshooting.md) - å¸¸è§é—®é¢˜è§£å†³
- [ğŸ“ ç¤ºä¾‹ä»£ç ](examples.md) - å®Œæ•´ç¤ºä¾‹é›†åˆ

## ğŸ¯ å¿«é€Ÿå¯¼èˆª

### æˆ‘æƒ³è¦...
- **åˆ›å»ºç¬¬ä¸€ä¸ªå¤šè¯­è¨€é…ç½®** â†’ [å¿«é€Ÿå¼€å§‹](quick-start.md)
- **æ³¨å†Œå¤šç§è¯­è¨€** â†’ [å¤šè¯­è¨€æ”¯æŒ](languages.md)
- **ä½¿ç”¨æ¨¡æ¿å˜é‡** â†’ [æ¨¡æ¿ç³»ç»Ÿ](templates.md)
- **è®¾ç½®å›é€€è¯­è¨€** â†’ [å›é€€æœºåˆ¶](fallback.md)
- **çƒ­é‡è½½è¯­è¨€æ–‡ä»¶** â†’ [åŠ¨æ€é‡è½½](hot-reload.md)
- **ä¼˜åŒ–æ€§èƒ½** â†’ [ç¼“å­˜ä¼˜åŒ–](caching.md)
- **æ”¯æŒä¸åŒæ ¼å¼** â†’ [å¤šæ ¼å¼æ”¯æŒ](formats.md)
- **è§£å†³é—®é¢˜** â†’ [æ•…éšœæ’é™¤](troubleshooting.md)

## ğŸ†• æœ€æ–°ç‰¹æ€§

- **å¤šæ ¼å¼æ”¯æŒ** - ç»§æ‰¿Configæ¨¡å—çš„å¤šæ ¼å¼æ”¯æŒï¼ˆJSONã€YAMLã€TOMLç­‰ï¼‰
- **æ¨¡æ¿æ›¿æ¢** - æ”¯æŒ`{0}`, `{1}`æ ¼å¼çš„ä½ç½®å‚æ•°æ›¿æ¢
- **ä¸‰çº§å›é€€** - ä¸»è¯­è¨€ â†’ é»˜è®¤è¯­è¨€ â†’ åŸæ–‡æœ¬çš„æ™ºèƒ½å›é€€
- **åŠ¨æ€é‡è½½** - æ”¯æŒè¿è¡Œæ—¶é‡æ–°åŠ è½½è¯­è¨€æ–‡ä»¶
- **ç¼“å­˜ä¼˜åŒ–** - å†…ç½®ç¼“å­˜æœºåˆ¶æå‡æ€§èƒ½
- **ç±»å‹å®‰å…¨** - å®Œæ•´çš„Kotlinç±»å‹æ”¯æŒ
- **èµ„æºç®¡ç†** - å®ç°Terminableæ¥å£ï¼Œè‡ªåŠ¨æ¸…ç†èµ„æº
- **æ’ä»¶é›†æˆ** - ä¸BasePluginå’ŒMessageManageræ— ç¼é›†æˆ

## ğŸŒ æ”¯æŒçš„è¯­è¨€æ ¼å¼

> **âš ï¸ é‡è¦è¯´æ˜**ï¼šä»¥ä¸‹ç¤ºä¾‹ä¸­çš„æ‰€æœ‰åŠ¨æ€å­—æ®µï¼ˆå¦‚`{0}`ã€`{1}`ã€`{2}`ç­‰ä½ç½®å‚æ•°ï¼‰éœ€è¦åœ¨ä½¿ç”¨æ—¶ä¼ é€’å…·ä½“å€¼ã€‚I18n æ¨¡å—ä½¿ç”¨ä½ç½®å‚æ•°è¿›è¡Œæ–‡æœ¬æ›¿æ¢ã€‚

### æ ¸å¿ƒæ ¼å¼
```yaml
# zh_CN.yml (ç®€ä½“ä¸­æ–‡)
welcome:
  message: "æ¬¢è¿ {0} æ¥åˆ°æœåŠ¡å™¨ï¼"
  first_join: "è¿™æ˜¯ {0} ç¬¬ä¸€æ¬¡åŠ å…¥æœåŠ¡å™¨"

server:
  status: "æœåŠ¡å™¨çŠ¶æ€ï¼š{0}"
  players: "åœ¨çº¿ç©å®¶ï¼š{0}/{1}"

economy:
  balance: "æ‚¨çš„ä½™é¢ï¼š{0} é‡‘å¸"
  transfer: "æˆåŠŸè½¬è´¦ {0} é‡‘å¸ç»™ {1}"
```

```json
// en_US.json (English)
{
  "welcome": {
    "message": "Welcome {0} to the server!",
    "first_join": "This is {0}'s first time joining"
  },
  "server": {
    "status": "Server status: {0}",
    "players": "Online players: {0}/{1}"
  },
  "economy": {
    "balance": "Your balance: {0} coins",
    "transfer": "Successfully transferred {0} coins to {1}"
  }
}
```

### æ‰©å±•æ ¼å¼
```toml
# ja_JP.toml (æ—¥æœ¬èª)
[welcome]
message = "ã‚ˆã†ã“ã {0} ã•ã‚“ï¼"
first_join = "{0} ã•ã‚“ã®åˆå›å‚åŠ ã§ã™"

[server]
status = "ã‚µãƒ¼ãƒãƒ¼çŠ¶æ…‹ï¼š{0}"
players = "ã‚ªãƒ³ãƒ©ã‚¤ãƒ³ãƒ—ãƒ¬ã‚¤ãƒ¤ãƒ¼ï¼š{0}/{1}"
```

## ğŸš€ å¿«é€Ÿé¢„è§ˆ

### åŸºç¡€ç”¨æ³•
```kotlin
class MyPlugin : BasePlugin() {
    override fun onPluginEnable() {
        // ç®€å•çš„è¯­è¨€ç®¡ç†å™¨é…ç½®
        setupLanguageManager(
            languageFiles = mapOf(
                Locale.SIMPLIFIED_CHINESE to "lang/zh_CN.yml",
                Locale.US to "lang/en_US.yml",
                Locale.JAPAN to "lang/ja_JP.toml"
            ),
            mergeWithTemplate = true,
            createBackup = false,
            majorLanguage = Locale.SIMPLIFIED_CHINESE,
            defaultLanguage = Locale.US
        )

        // ä½¿ç”¨å¤šè¯­è¨€æ¶ˆæ¯
        messager.info(player, "<%welcome.message%>", player.name)
    }
}
```

### ä½ç½®å‚æ•°æ›¿æ¢
```kotlin
override fun onPluginEnable() {
    // ä½¿ç”¨ä½ç½®å‚æ•°è¿›è¡Œæ–‡æœ¬æ›¿æ¢
    // è¯­è¨€æ–‡ä»¶ä¸­ï¼šwelcome.message: "æ¬¢è¿ {0} æ¥åˆ° {1}ï¼"
    messager.info(player, "<%welcome.message%>", player.name, server.name)
    // ç»“æœï¼š"æ¬¢è¿ Steve æ¥åˆ° æˆ‘çš„æœåŠ¡å™¨ï¼"

    // è¯­è¨€æ–‡ä»¶ä¸­ï¼šserver.players: "åœ¨çº¿ç©å®¶ï¼š{0}/{1}"
    messager.info(player, "<%server.players%>", server.onlinePlayers.size, server.maxPlayers)
    // ç»“æœï¼š"åœ¨çº¿ç©å®¶ï¼š5/20"

    // è¯­è¨€æ–‡ä»¶ä¸­ï¼šeconomy.transfer: "æˆåŠŸè½¬è´¦ {0} é‡‘å¸ç»™ {1}"
    messager.info(player, "<%economy.transfer%>", 100, targetPlayer.name)
    // ç»“æœï¼š"æˆåŠŸè½¬è´¦ 100 é‡‘å¸ç»™ Alex"
}
```

### åŠ¨æ€è¯­è¨€åˆ‡æ¢
```kotlin
// ä¸ºç‰¹å®šç©å®¶è®¾ç½®è¯­è¨€
languageManager.setPlayerLanguage(player, Locale.US)

// è·å–ç©å®¶çš„è¯­è¨€è®¾ç½®
val playerLanguage = languageManager.getPlayerLanguage(player)

// ä½¿ç”¨ç©å®¶è¯­è¨€å‘é€æ¶ˆæ¯ï¼Œä¼ é€’å‚æ•°
val message = languageManager.provideLanguage("<%welcome.message%>", player, player.name)
player.sendMessage(message)
```

### å›é€€æœºåˆ¶
```kotlin
// é…ç½®å›é€€ç­–ç•¥
languageManager
    .setMajorLanguage(Locale.SIMPLIFIED_CHINESE)  // ä¸»è¯­è¨€
    .setDefaultLanguage(Locale.US)                // é»˜è®¤è¯­è¨€

// æŸ¥æ‰¾é¡ºåºï¼š
// 1. ç©å®¶è®¾ç½®çš„è¯­è¨€ï¼ˆå¦‚æœæœ‰ï¼‰
// 2. ä¸»è¯­è¨€ï¼ˆç®€ä½“ä¸­æ–‡ï¼‰
// 3. é»˜è®¤è¯­è¨€ï¼ˆè‹±è¯­ï¼‰
// 4. åŸå§‹æ–‡æœ¬ï¼ˆå¦‚æœéƒ½æ‰¾ä¸åˆ°ï¼‰
```

### åŠ¨æ€é‡è½½
```kotlin
// é‡æ–°åŠ è½½æ‰€æœ‰è¯­è¨€æ–‡ä»¶
languageManager.reload()

// é‡æ–°åŠ è½½ç‰¹å®šè¯­è¨€
languageManager.reloadLanguage(Locale.SIMPLIFIED_CHINESE)

// ç›‘å¬æ–‡ä»¶å˜åŒ–è‡ªåŠ¨é‡è½½
languageManager.enableAutoReload(true)
```

### ç¼“å­˜ä¼˜åŒ–
```kotlin
// é…ç½®ç¼“å­˜ç­–ç•¥
languageManager.setCacheConfig(
    type = CacheType.LRU,
    capacity = 1000,
    expireAfterAccess = Duration.ofMinutes(30)
)

// æ¸…ç†ç¼“å­˜
languageManager.clearCache()

// è·å–ç¼“å­˜ç»Ÿè®¡
val stats = languageManager.getCacheStats()
logger.info("ç¼“å­˜å‘½ä¸­ç‡: ${stats.hitRate * 100}%")
```

## ğŸ”§ é›†æˆæ–¹å¼

### ä¸MessageManageré›†æˆ
```kotlin
class MyPlugin : BasePlugin() {
    override fun onPluginEnable() {
        // ä½¿ç”¨ setupLanguageManager é…ç½®è¯­è¨€ç®¡ç†å™¨
        setupLanguageManager(
            languageFiles = mapOf(
                Locale.SIMPLIFIED_CHINESE to "lang/zh_CN.yml",
                Locale.US to "lang/en_US.yml"
            ),
            majorLanguage = Locale.SIMPLIFIED_CHINESE,
            defaultLanguage = Locale.US
        )

        // ç°åœ¨MessageManagerä¼šè‡ªåŠ¨ä½¿ç”¨å¤šè¯­è¨€ï¼Œæ”¯æŒä½ç½®å‚æ•°
        messager.info(player, "<%welcome.message%>", player.name)
        messager.warning(player, "<%error.insufficient_permission%>")
    }
}
```

### ç‹¬ç«‹ä½¿ç”¨
```kotlin
class MyService {
    private val languageManager = LanguageManager(plugin, configManager)

    fun sendWelcomeMessage(player: Player) {
        val message = languageManager.provideLanguage("<%welcome.message%>", player, player.name)
        player.sendMessage(message)
    }

    fun getLocalizedText(key: String, locale: Locale, vararg args: Any): String {
        return languageManager.getText(key, locale, *args)
    }
}
```

## ğŸ¤ è´¡çŒ®

å¦‚æœæ‚¨å‘ç°æ–‡æ¡£ä¸­çš„é”™è¯¯æˆ–æœ‰æ”¹è¿›å»ºè®®ï¼Œæ¬¢è¿æäº¤Issueæˆ–Pull Requestã€‚

---

**å¼€å§‹æ‚¨çš„I18nå¼€å‘ä¹‹æ—…** â†’ [ğŸ“– ä»‹ç»](intro.md)
